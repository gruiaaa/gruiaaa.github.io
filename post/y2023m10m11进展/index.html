<!DOCTYPE html>
<html lang="en">

<head>
    
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="HandheldFriendly" content="True" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="generator" content="Hugo 0.109.0">



<meta name="theme-color" content="#ffffff" />


<title>Y2023M10M11进展 - GRUIA</title>


<meta name="author" content="Gruia" />


<meta name="description" content="A minimal Hugo theme with nice theme color." />



<meta property="og:title" content="Y2023M10M11进展" />
<meta name="twitter:title" content="Y2023M10M11进展" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://gruiaaa.github.io/post/y2023m10m11%E8%BF%9B%E5%B1%95/" /><meta property="og:description" content="游戏数据实验分析记录 2023-10 增量特征选择 data：202303to04 game_data_202303to04.csv method 首先使用随机森林过一遍数据，得到特征的重要性，按重要性依次增加特征直到精确度没有明显提高 result Selected Features: [&#39;latest_login_day&#39;, &#39;login_days&#39;, &#39;loss_count&#39;] Number of Features (N): 3 Accuracy: 0.8421 F1 Score: 0.5970 Precision: 0.5917 Recall: 0.6025 ======================================== Selected" />
<meta name="twitter:description" content="游戏数据实验分析记录 2023-10 增量特征选择 data：202303to04 game_data_202303to04.csv method 首先使用随机森林过一遍数据，得到特征的重要性，按重要性依次增加特征直到精确度没有明显提高 result Selected Features: [&#39;latest_login_day&#39;, &#39;login_days&#39;, &#39;loss_count&#39;] Number of Features (N): 3 Accuracy: 0.8421 F1 Score: 0.5970 Precision: 0.5917 Recall: 0.6025 ======================================== Selected" /><meta property="og:image" content="https://gruiaaa.github.io/img/og.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://gruiaaa.github.io/img/og.png" /><meta property="article:published_time" content="2023-11-09T21:28:35+08:00" /><meta property="article:modified_time" content="2023-11-09T21:28:35+08:00" />


<style>
    @media (prefers-color-scheme: dark) {
        body[data-theme='auto'] img {
            filter: brightness(60%);
        }
    }

    body[data-theme='dark'] img {
        filter: brightness(60%);
    }
</style>




<link rel="stylesheet" href="https://gruiaaa.github.io/assets/css/fuji.min.cc1b078531f52a14fc2f4bb88d09799de908cb4a586c731716cf9f564e2e5042af9e06235a2d54efdd28c3272c357e62ac2ef87e06a99257b039e6c164914485.css" integrity="sha512-zBsHhTH1KhT8L0u4jQl5nekIy0pYbHMXFs&#43;fVk4uUEKvngYjWi1U790owycsNX5irC74fgapklewOebBZJFEhQ==" />








    <link rel="icon" type="image/png" href="https://gruia-images-1309786869.cos.ap-chongqing.myqcloud.com/blogImg/logo.png" />
</head>

<body
  data-theme="light"
  data-theme-auto='false'
  >
    <script data-cfasync="false">
  
  var fujiThemeData = localStorage.getItem('fuji_data-theme');
  
  if (!fujiThemeData) {
    localStorage.setItem('fuji_data-theme', 'auto');
  } else {
    
    if (fujiThemeData !== 'auto') {
      document.body.setAttribute('data-theme', fujiThemeData === 'dark' ? 'dark' : 'light');
    }
  }
</script>

    <header>
    <div class="container-lg clearfix">
        <div class="col-12 header">
            <a class="title-main" href="https://gruiaaa.github.io">GRUIA</a>
            
            <span class="title-sub">不如烂键盘</span>
            
        </div>
    </div>
</header>

    <main>
        <div class="container-lg clearfix">
            
            <div class="col-12 col-md-9 float-left content">
                
<article>
    
    <h2 class="post-item post-title">
        <a href="https://gruiaaa.github.io/post/y2023m10m11%E8%BF%9B%E5%B1%95/">Y2023M10M11进展</a>
    </h2>
    <div class="post-item post-meta">
        <span><i class="iconfont icon-today-sharp"></i>&nbsp;2023-11-09</span>

<span><i class="iconfont icon-file-tray-sharp"></i>&nbsp;2963 words</span>


    </div>
    
    <div class="post-content markdown-body">
        <h1 id="游戏数据实验分析记录">游戏数据实验分析记录</h1>
<h2 id="2023-10-增量特征选择">2023-10 增量特征选择</h2>
<h3 id="data202303to04">data：202303to04</h3>
<p><code>game_data_202303to04.csv</code></p>
<h3 id="method">method</h3>
<p>首先使用随机森林过一遍数据，得到特征的重要性，按重要性依次增加特征直到精确度没有明显提高</p>
<h3 id="result">result</h3>
<pre><code class="language-bash">Selected Features: ['latest_login_day', 'login_days', 'loss_count']
Number of Features (N): 3
Accuracy: 0.8421
F1 Score: 0.5970
Precision: 0.5917
Recall: 0.6025
========================================

Selected Features: ['latest_login_day', 'login_days', 'loss_count', 'profit_count']
Number of Features (N): 4
Accuracy: 0.8523
F1 Score: 0.6098
Precision: 0.6260
Recall: 0.5944
========================================

Selected Features: ['latest_login_day', 'login_days', 'loss_count', 'profit_count', 'user_bf_sum']
Number of Features (N): 5
Accuracy: 0.8584
F1 Score: 0.6212
Precision: 0.6459
Recall: 0.5984
========================================

Selected Features: ['latest_login_day', 'login_days', 'loss_count', 'profit_count', 'user_bf_sum', 'total_game_minutes']
Number of Features (N): 6
Accuracy: 0.8630
F1 Score: 0.6307
Precision: 0.6613
Recall: 0.6027
========================================

Selected Features: ['latest_login_day', 'login_days', 'loss_count', 'profit_count', 'user_bf_sum', 'total_game_minutes', 'user_jushu_sum']
Number of Features (N): 7
Accuracy: 0.8631
F1 Score: 0.6317
Precision: 0.6613
Recall: 0.6046
========================================

Selected Features: ['latest_login_day', 'login_days', 'loss_count', 'profit_count', 'user_bf_sum', 'total_game_minutes', 'user_jushu_sum', 'login_stability']
Number of Features (N): 8
Accuracy: 0.8652
F1 Score: 0.6357
Precision: 0.6684
Recall: 0.6060
========================================

Selected Features: ['latest_login_day', 'login_days', 'loss_count', 'profit_count', 'user_bf_sum', 'total_game_minutes', 'user_jushu_sum', 'login_stability', 'reg_month']
Number of Features (N): 9
Accuracy: 0.8683
F1 Score: 0.6463
Precision: 0.6748
Recall: 0.6200
========================================

Selected Features: ['latest_login_day', 'login_days', 'loss_count', 'profit_count', 'user_bf_sum', 'total_game_minutes', 'user_jushu_sum', 'login_stability', 'reg_month', 'clubid']
Number of Features (N): 10
Accuracy: 0.8698
F1 Score: 0.6516
Precision: 0.6781
Recall: 0.6271
========================================

Selected Features: ['latest_login_day', 'login_days', 'loss_count', 'profit_count', 'user_bf_sum', 'total_game_minutes', 'user_jushu_sum', 'login_stability', 'reg_month', 'clubid', 'jifen_count_n']
Number of Features (N): 11
Accuracy: 0.8712
F1 Score: 0.6552
Precision: 0.6818
Recall: 0.6306
========================================

Selected Features: ['latest_login_day', 'login_days', 'loss_count', 'profit_count', 'user_bf_sum', 'total_game_minutes', 'user_jushu_sum', 'login_stability', 'reg_month', 'clubid', 'jifen_count_n', 'jifen_count_month']
Number of Features (N): 12
Accuracy: 0.8714
F1 Score: 0.6552
Precision: 0.6831
Recall: 0.6295
========================================

Selected Features: ['latest_login_day', 'login_days', 'loss_count', 'profit_count', 'user_bf_sum', 'total_game_minutes', 'user_jushu_sum', 'login_stability', 'reg_month', 'clubid', 'jifen_count_n', 'jifen_count_month', 'matched_players_count']
Number of Features (N): 13
Accuracy: 0.8715
F1 Score: 0.6558
Precision: 0.6827
Recall: 0.6310
========================================

Selected Features: ['latest_login_day', 'login_days', 'loss_count', 'profit_count', 'user_bf_sum', 'total_game_minutes', 'user_jushu_sum', 'login_stability', 'reg_month', 'clubid', 'jifen_count_n', 'jifen_count_month', 'matched_players_count', '0']
Number of Features (N): 14
Accuracy: 0.8725
F1 Score: 0.6579
Precision: 0.6862
Recall: 0.6319
========================================

Selected Features: ['latest_login_day', 'login_days', 'loss_count', 'profit_count', 'user_bf_sum', 'total_game_minutes', 'user_jushu_sum', 'login_stability', 'reg_month', 'clubid', 'jifen_count_n', 'jifen_count_month', 'matched_players_count', '0', 'bf_sum_dividedby_unique_matched_user_count ']
Number of Features (N): 15
Accuracy: 0.8717
F1 Score: 0.6554
Precision: 0.6848
Recall: 0.6284
========================================
......
</code></pre>
<p>Number of Features &gt;=14后，精确度保持在0.87左右，不再有明显提升。于是选择特征为(14个)</p>
<pre><code class="language-bash">['latest_login_day', 'login_days', 'loss_count', 'profit_count', 'user_bf_sum', 
'total_game_minutes', 'user_jushu_sum', 'login_stability', 'reg_month', 
'clubid', 'jifen_count_n', 'jifen_count_month', 'matched_players_count', '0']
</code></pre>
<h2 id="2023-10-使用ncr方法">2023-10 使用NCR方法</h2>
<h3 id="ncr介绍">NCR介绍</h3>
<p>NeighbourhoodCleaningRule（NCR）一种用于处理模式分类问题的数据预处理技术。它主要应用于处理具有多个类别的不平衡数据集，其中某些类别的样本数量远远少于其他类别。</p>
<p>NCR 的主要目标是通过删除一些训练集中的样本，以改善分类器的性能。它的工作原理可以概括为以下几个步骤：</p>
<ol>
<li><strong>计算每个类别的近邻：</strong> 对于每个类别，通过计算每个样本与同一类别中其他样本的距离，找到每个样本的同类近邻。</li>
<li><strong>识别需要移除的样本：</strong> 对于每个类别，识别那些与其近邻差异较大的样本。这些样本可能是噪声或者对于分类器性能的负面影响较大的样本。</li>
<li><strong>删除冗余样本：</strong> 从训练集中删除被标记为需要移除的样本，以减少噪声和提高模型的泛化能力。</li>
</ol>
<p>NCR 的目的是优化训练集，使其更适用于构建分类模型。通过删除一些冗余和噪声样本，NCR 可以帮助分类器更好地学习数据的真实模式，而不受不平衡类别分布和噪声的影响。</p>
<p>NCR有一些可控参数，可以根据具体问题和数据集进行调整。这些参数主要包括：</p>
<ol>
<li><strong>k_neighbors：</strong> 这是一个重要的参数，表示计算近邻时要考虑的邻居数量。通常，选择一个适当的 k 值对于找到每个样本的近邻至关重要。较小的 k 可能导致对噪声更敏感，而较大的 k 可能导致过度平滑，忽略掉局部的细节。因此，k_neighbors 的选择通常需要通过交叉验证或实验来确定。</li>
<li><strong>threshold_cleaning：</strong> 这个阈值参数用于确定哪些样本将被标记为噪声并被移除。具体来说，如果某个样本与其近邻的差异超过了阈值，那么它可能被认为是噪声。调整这个阈值可以影响对噪声的敏感性，需要根据具体情况进行调整。</li>
<li><strong>n_jobs：</strong> 如果计算近邻的过程可以并行化，这个参数可以指定并行计算的数量，加速计算的过程。</li>
</ol>
<h3 id="data202303to04-1">data:202303to04</h3>
<p><code>game_data_202303to04.csv</code></p>
<h3 id="method随机下采样ncrautogluon">method:随机下采样+NCR+Autogluon</h3>
<p>随机下采样+NCR+Autogluon</p>
<h3 id="result-1">result</h3>
<ol>
<li>基准（原始数据）结果</li>
</ol>
<pre><code class="language-bash">0    184495
1     44687
Name: is_churned, dtype: int64 


准确性: 0.876300
分类报告:
               precision    recall  f1-score   support

           0       0.92      0.93      0.92     55469
           1       0.69      0.64      0.67     13286

    accuracy                           0.88     68755
   macro avg       0.81      0.79      0.80     68755
weighted avg       0.87      0.88      0.87     68755
</code></pre>
<ol start="2">
<li>随机下采样</li>
</ol>
<pre><code class="language-bash">0    44687
1    44687
Name: is_churned, dtype: int64 


准确性: 0.854697
分类报告:
               precision    recall  f1-score   support

           0       0.88      0.82      0.85     13362
           1       0.83      0.89      0.86     13451

    accuracy                           0.85     26813
   macro avg       0.86      0.85      0.85     26813
weighted avg       0.86      0.85      0.85     26813
</code></pre>
<p>随机采样会导致精确率下降</p>
<p>思考原因：数据有整体的分布特征，随机采样会影响数据的分布情况，但下采样前后随机森林特征重要性顺序不一致，但整体上是相同的，只有几个顺序不同。</p>
<p>选择特征为</p>
<pre><code class="language-bash">['latest_login_day', 'login_days', 'loss_count', 'profit_count', 'user_bf_sum', 'total_game_minutes', 'user_jushu_sum', login_stability''reg_month', 'clubid', 'jifen_count_n', 'jifen_count_month', 'matched_players_count', '0']
</code></pre>
<ol start="3">
<li>使用NCR进行采样</li>
</ol>
<ul>
<li>原始数据集（指未进行特征选择</li>
</ul>
<pre><code class="language-bash">进行1次

0    118705
1     44687
Name: is_churned, dtype: int64 

准确性: 0.893182
分类报告:
            precision    recall  f1-score   support

   0       0.93      0.92      0.93     35641
   1       0.80      0.81      0.81     13377

accuracy                            0.89     49018
macro avg       0.86      0.87      0.87     49018
weighted avg    0.89      0.89      0.89     49018


进行2次

0    80052
1    44687
Name: is_churned, dtype: int64 

准确性: 0.910694
分类报告:
            precision    recall  f1-score   support

   0       0.94      0.92      0.93     24070
   1       0.86      0.89      0.88     13352

accuracy                            0.91     37422
macro avg       0.90      0.91      0.90     37422
weighted avg    0.91      0.91      0.91     37422


进行3次

0    57259
1    44687
Name: is_churned, dtype: int64 

准确性: 0.925909
分类报告:
            precision    recall  f1-score   support

   0       0.94      0.93      0.93     17128
   1       0.91      0.92      0.92     13456

accuracy                         0.93     30584
macro avg       0.92      0.93      0.92     30584
weighted avg    0.93      0.93      0.93     30584
</code></pre>
<ul>
<li>选择了特征（上面的14个</li>
</ul>
<pre><code class="language-bash">进行1次

0    123549
1     44687
Name: is_churned, dtype: int64 

准确性: 0.901864
分类报告:
            precision    recall  f1-score   support

   0       0.93      0.93      0.93     37085
   1       0.81      0.82      0.82     13386

accuracy                            0.90     50471
macro avg       0.87      0.87      0.87     50471
weighted avg    0.90      0.90      0.90     50471



进行2次
0    90086
1    44687
Name: is_churned, dtype: int64 

准确性: 0.920929
分类报告:
            precision    recall  f1-score   support

   0       0.94      0.94      0.94     27043
   1       0.88      0.89      0.88     13389

accuracy                            0.92     40432
macro avg       0.91      0.91      0.91     40432
weighted avg    0.92      0.92      0.92     40432



进行3次
0    69536
1    44687
Name: is_churned, dtype: int64 

准确性: 0.933931
分类报告:
            precision    recall  f1-score   support

   0       0.95      0.95      0.95     20883
   1       0.92      0.92      0.92     13384

accuracy                            0.93     34267
macro avg       0.93      0.93      0.93     34267
weighted avg    0.93      0.93      0.93     34267
</code></pre>
<p>从结果上看，ncr通过采样对数据进行了清洗，使精确度上升。多次ncr是因为不好确定参数所以使用默认的多次进行，可拓展进行调参工作。</p>
<p>在未进行特征选择与进行特征选择上，可看出<strong>进行特征选择效果好</strong></p>
<p>思考原因：去掉了噪声数据or优化了数据的结构？使边界清晰可分？</p>
<ol start="4">
<li>使用Autogluon</li>
</ol>
<p>使用进行特征选择过后的数据</p>
<p><img class="img-zoomable" src="https://gruia-images-1309786869.cos.ap-chongqing.myqcloud.com/blogImg/image-20231106161203021.png" alt="image-20231106161203021" />
</p>
<p>最好结果0.968</p>
<ol start="5">
<li>用当月预测下月数据</li>
</ol>
<ul>
<li>使用autogluon</li>
</ul>
<pre><code class="language-bash">分类报告:
               precision    recall  f1-score   support

            0       0.92      0.80      0.85    180794
            1       0.43      0.68      0.53     41099

   accuracy                           0.77    221893
   macro avg       0.67      0.74      0.69    221893
weighted avg       0.83      0.77      0.79    221893
</code></pre>
<p>​ 使用202303月的数据训练模型，预测202304月的用户在下一月是否会流失，精确度为0.83</p>
<ul>
<li>使用随机森林</li>
</ul>
<pre><code class="language-bash">分类报告:
               precision    recall  f1-score   support

            0       0.91      0.84      0.87    180794
            1       0.47      0.64      0.54     41099

   accuracy                           0.80    221893
   macro avg       0.69      0.74      0.71    221893
weighted avg       0.83      0.80      0.81    221893
</code></pre>
<p>​ 同0.83</p>
<h2 id="2023-10-ncr--手动实现stacking">2023-10 NCR + 手动实现Stacking</h2>
<h3 id="data202303to04-2">data:202303to04</h3>
<p><code>game_data_202303to04.csv</code></p>
<h3 id="methodncr--阈值stacking">method:NCR + 手动实现Stacking</h3>
<p>ncr + 手写多层stacking模型，</p>
<h3 id="result-2">result</h3>
<pre><code class="language-bash">准确率: 0.9412125191507988
查准率: 0.9272358639333184
查全率: 0.9219397468921492
AUC: 0.9377591807182792
F1值: 0.9245802212613017
</code></pre>
<p>精确度 0.94 有所提升</p>
<h2 id="2023-10-ncr--阈值stacking">2023-10 NCR + 阈值Stacking</h2>
<h3 id="data202303to04-3">data:202303to04</h3>
<p><code>game_data_202303to04.csv</code></p>
<h3 id="methodncr--阈值stacking-1">method:NCR + 阈值Stacking</h3>
<p>ncr + 使用阈值，第一层模型精确度小于阈值则放到第二层进行预测</p>
<h3 id="result-3">result</h3>
<pre><code class="language-bash">here is levle1 : 34266
Accuracy: 0.9322944026148369
Precision: 0.9124207385303991
Recall: 0.9143305673917919
F1score: 0.9133746546187738



here is levle2 : 8069
Accuracy: 0.7613087123559301
Precision: 0.7661800486618005
Recall: 0.7654350996596986
F1score: 0.7658073929961089


here is all : 34266
Accuracy: 0.9316815502247126
Precision: 0.9101081685938083
Recall: 0.9148170365926814
F1score: 0.9124565274297894
</code></pre>
<p>精确度0.93 效果不行 甚至有下降</p>
<h2 id="2023-10-ncr--聚类后再预测">2023-10 NCR + 聚类后再预测</h2>
<h3 id="data202303to04-4">data:202303to04</h3>
<p><code>game_data_202303to04.csv</code></p>
<h3 id="methodncr--聚类分类预测">method:ncr + 聚类分类预测</h3>
<p>ncr + 聚类分类预测</p>
<h3 id="result-4">result</h3>
<pre><code class="language-bash">Cluster 1: 112340
Accuracy: 0.934900

Cluster 2: 1063
Accuracy: 0.984326

Cluster 3: 820
Accuracy: 0.918699

(112340 × 0.9349 + 1063 × 0.984326 + 820 × 0.918699 ) ÷ ( 112340 + 1063 + 820 ) = 0.935243669
</code></pre>
<p>精确度0.935243669  没啥实质上的提升</p>
<h2 id="2023-11-探究降维ncr">2023-11 探究降维+NCR</h2>
<h3 id="data202303to04-5">data:202303to04</h3>
<p><code>game_data_202303to04.csv</code></p>
<h3 id="method原始数据pca降维ncr">method:原始数据+pca降维+ncr</h3>
<p>原始数据+pca降维+ncr</p>
<h3 id="resultncr有用pca不行">result:NCR有用，PCA不行</h3>
<ol>
<li>原始数据使用随机森林</li>
</ol>
<pre><code class="language-bash">229182 rows × 31 columns



df[&quot;is_churned&quot;].value_counts()
0    184495
1     44687
Name: is_churned, dtype: int64



准确性: 0.876300
分类报告

   precision    recall  f1-score   support 

   0       0.92      0.93      0.92     55469
   1       0.69      0.64      0.67     13286

accuracy                            0.88     68755
macro avg       0.81      0.79      0.80     68755
weighted avg    0.87      0.88      0.87     68755



[('latest_login_day', 0.2418727594864187),
('login_days', 0.07886418530607936),
('loss_count', 0.045186256261861145),
('profit_count', 0.04262812223075775),
('login_stability', 0.03998179476619455),
('uid', 0.03923794456343341),
('reg_month', 0.039148124183021264),
('user_bf_sum', 0.03860556877042286),
('total_game_minutes', 0.03851308126674735),
('clubid', 0.03526903564576649),
('user_jushu_sum', 0.03339574500029432),
('jifen_count_n', 0.03337370226642696),
('jifen_count_month', 0.03326450598962374),
('age', 0.02855107605433984),
('bf_sum_dividedby_unique_matched_user_count ', 0.027868947919698444),
('matched_players_count', 0.027607231545116094),
('single_match_max_loss', 0.025554540542938257),
('single_match_max_profit', 0.025127314856000848),
('single_bf_max_duration', 0.024576895567956843),
('0', 0.02412714298583877),
('nopl_count', 0.02311539091108239),
('single_bf_min_duration', 0.02007444129850095),
('registerPacketID', 0.012279389458818445),
('14', 0.00604134405790907),
('sex', 0.004944329800613679),
('11', 0.0036682343775060106),
('different_gametype_count', 0.0032179315521720926),
('different_mtype_count', 0.0025089029051028108),
('mostgamed', 0.0013959282913210413),
('13', 1.3213803651003698e-07)]
</code></pre>
<ol start="2">
<li>使用pca降维</li>
</ol>
<pre><code class="language-bash">Original shape: (229182, 30)
Reduced shape: (229182, 20)



准确性: 0.839226
分类报告:
            precision    recall  f1-score   support

   0       0.86      0.95      0.91     55469
   1       0.65      0.36      0.46     13286

accuracy                            0.84     68755
macro avg       0.76      0.66      0.68     68755
weighted avg    0.82      0.84      0.82     68755



[(6, 0.09520780363219808),
(9, 0.05872054088652245),
(18, 0.0580249402092808),
(11, 0.055157958632657975),
(0, 0.05393465637281576),
(7, 0.05342040631387681),
(19, 0.052851067713724234),
(13, 0.05107827614645249),
(3, 0.050868010084392824),
(8, 0.049195685828255946),
(15, 0.0470627357880891),
(10, 0.04560173976027854),
(12, 0.043297550062218484),
(2, 0.042751243517803496),
(16, 0.0425688482932868),
(1, 0.04179162572408975),
(17, 0.041085983578810756),
(4, 0.041035607218460335),
(14, 0.03876389995774494),
(5, 0.03758142027904032)]
</code></pre>
<p>使用降维以后精确度下降到了0.83左右，回到了没有加<code>latest_login_day</code>这个特征时的精度。</p>
<p>思考原因：降维之前的原始数据中<code>latest_login_day</code>特征贡献程度显著高于其他特征，而降维以后数据丢失了时序特性？所以这是一个与时序相关的预测？</p>
<ol start="3">
<li>降维后数据使用ncr</li>
</ol>
<pre><code class="language-bash">使用1次

0    118704
1     44687
Name: is_churned, dtype: int64 

准确性: 0.836305
分类报告:
            precision    recall  f1-score   support

   0       0.86      0.93      0.89     35604
   1       0.76      0.58      0.66     13414

accuracy                            0.84     49018
macro avg       0.81      0.76      0.78     49018
weighted avg    0.83      0.84      0.83     49018



使用2次

0    80049
1    44687
Name: is_churned, dtype: int64 

准确性: 0.852329
分类报告:
            precision    recall  f1-score   support

   0       0.86      0.92      0.89     24075
   1       0.83      0.73      0.78     13346

accuracy                            0.85     37421
macro avg       0.85      0.83      0.83     37421
weighted avg    0.85      0.85      0.85     37421



使用3次

0    57258
1    44687
Name: is_churned, dtype: int64 

准确性: 0.868559
分类报告:
            precision    recall  f1-score   support

   0       0.86      0.91      0.89     17116
   1       0.88      0.82      0.85     13468

accuracy                            0.87     30584
macro avg       0.87      0.86      0.87     30584
weighted avg    0.87      0.87      0.87     30584
</code></pre>
<p>结论 NCR有用，PCA不行</p>

    </div>
</article>





            </div>
            <aside class="col-12 col-md-3 float-left sidebar">
    
    <div class="sidebar-item sidebar-pages">
        <h3>Pages</h3>
        <ul>
            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/search/">Search</a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-links">
        <h3>Links</h3>
        <ul>
            
            <li>
                <a href="https://github.com/gruiaaa" target="_blank"><span>GitHub</span></a>
            </li>
            
            <li>
                <a href="https://gitee.com/Gruia/" target="_blank"><span>Gtiee</span></a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-tags">
        <h3>Tags</h3>
        <div>
            
        </div>
    </div>
    <div class="sidebar-item sidebar-toc">
        <h3>Table of Contents</h3><nav id="TableOfContents">
  <ul>
    <li><a href="#2023-10-增量特征选择">2023-10 增量特征选择</a>
      <ul>
        <li><a href="#data202303to04">data：202303to04</a></li>
        <li><a href="#method">method</a></li>
        <li><a href="#result">result</a></li>
      </ul>
    </li>
    <li><a href="#2023-10-使用ncr方法">2023-10 使用NCR方法</a>
      <ul>
        <li><a href="#ncr介绍">NCR介绍</a></li>
        <li><a href="#data202303to04-1">data:202303to04</a></li>
        <li><a href="#method随机下采样ncrautogluon">method:随机下采样+NCR+Autogluon</a></li>
        <li><a href="#result-1">result</a></li>
      </ul>
    </li>
    <li><a href="#2023-10-ncr--手动实现stacking">2023-10 NCR + 手动实现Stacking</a>
      <ul>
        <li><a href="#data202303to04-2">data:202303to04</a></li>
        <li><a href="#methodncr--阈值stacking">method:NCR + 手写Stacking</a></li>
        <li><a href="#result-2">result</a></li>
      </ul>
    </li>
    <li><a href="#2023-10-ncr--阈值stacking">2023-10 NCR + 阈值Stacking</a>
      <ul>
        <li><a href="#data202303to04-3">data:202303to04</a></li>
        <li><a href="#methodncr--阈值stacking-1">method:NCR + 阈值Stacking</a></li>
        <li><a href="#result-3">result</a></li>
      </ul>
    </li>
    <li><a href="#2023-10-ncr--聚类后再预测">2023-10 NCR + 聚类后再预测</a>
      <ul>
        <li><a href="#data202303to04-4">data:202303to04</a></li>
        <li><a href="#methodncr--聚类分类预测">method:ncr + 聚类分类预测</a></li>
        <li><a href="#result-4">result</a></li>
      </ul>
    </li>
    <li><a href="#2023-11-探究降维ncr">2023-11 探究降维+NCR</a>
      <ul>
        <li><a href="#data202303to04-5">data:202303to04</a></li>
        <li><a href="#method原始数据pca降维ncr">method:原始数据+pca降维+ncr</a></li>
        <li><a href="#resultncr有用pca不行">result:NCR有用，PCA不行</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
</aside>

        </div>
        <div class="btn">
    <div class="btn-menu" id="btn-menu">
        <i class="iconfont icon-grid-sharp"></i>
    </div>
    <div class="btn-toggle-mode">
        <i class="iconfont icon-contrast-sharp"></i>
    </div>
    <div class="btn-scroll-top">
        <i class="iconfont icon-chevron-up-circle-sharp"></i>
    </div>
</div>
<aside class="sidebar-mobile" style="display: none;">
  <div class="sidebar-wrapper">
    
    <div class="sidebar-item sidebar-pages">
        <h3>Pages</h3>
        <ul>
            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/search/">Search</a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-links">
        <h3>Links</h3>
        <ul>
            
            <li>
                <a href="https://github.com/gruiaaa" target="_blank"><span>GitHub</span></a>
            </li>
            
            <li>
                <a href="https://gitee.com/Gruia/" target="_blank"><span>Gtiee</span></a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-tags">
        <h3>Tags</h3>
        <div>
            
        </div>
    </div>
    
    
    
    <div class="sidebar-item sidebar-toc">
        <h3>Table of Contents</h3>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#2023-10-增量特征选择">2023-10 增量特征选择</a>
      <ul>
        <li><a href="#data202303to04">data：202303to04</a></li>
        <li><a href="#method">method</a></li>
        <li><a href="#result">result</a></li>
      </ul>
    </li>
    <li><a href="#2023-10-使用ncr方法">2023-10 使用NCR方法</a>
      <ul>
        <li><a href="#ncr介绍">NCR介绍</a></li>
        <li><a href="#data202303to04-1">data:202303to04</a></li>
        <li><a href="#method随机下采样ncrautogluon">method:随机下采样+NCR+Autogluon</a></li>
        <li><a href="#result-1">result</a></li>
      </ul>
    </li>
    <li><a href="#2023-10-ncr--手动实现stacking">2023-10 NCR + 手动实现Stacking</a>
      <ul>
        <li><a href="#data202303to04-2">data:202303to04</a></li>
        <li><a href="#methodncr--阈值stacking">method:NCR + 阈值Stacking</a></li>
        <li><a href="#result-2">result</a></li>
      </ul>
    </li>
    <li><a href="#2023-10-ncr--阈值stacking">2023-10 NCR + 阈值Stacking</a>
      <ul>
        <li><a href="#data202303to04-3">data:202303to04</a></li>
        <li><a href="#methodncr--阈值stacking-1">method:NCR + 阈值Stacking</a></li>
        <li><a href="#result-3">result</a></li>
      </ul>
    </li>
    <li><a href="#2023-10-ncr--聚类后再预测">2023-10 NCR + 聚类后再预测</a>
      <ul>
        <li><a href="#data202303to04-4">data:202303to04</a></li>
        <li><a href="#methodncr--聚类分类预测">method:ncr + 聚类分类预测</a></li>
        <li><a href="#result-4">result</a></li>
      </ul>
    </li>
    <li><a href="#2023-11-探究降维ncr">2023-11 探究降维+NCR</a>
      <ul>
        <li><a href="#data202303to04-5">data:202303to04</a></li>
        <li><a href="#method原始数据pca降维ncr">method:原始数据+pca降维+ncr</a></li>
        <li><a href="#resultncr有用pca不行">result:NCR有用，PCA不行</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
    
    
  </div>
</aside>
    </main>

    <footer>
    <div class="container-lg clearfix">
        <div class="col-12 footer">
            - Gruia -
        </div>
    </div>
</footer>

    
<script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js" integrity="sha512-q583ppKrCRc7N5O0n2nzUiJ+suUv7Et1JGels4bXOaMFQcamPk9HjdUknZuuFjBNs7tsMuadge5k9RzdmO+1GQ==" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.27.0/components/prism-core.min.js" integrity="sha512-LCKPTo0gtJ74zCNMbWw04ltmujpzSR4oW+fgN+Y1YclhM5ZrHCZQAJE4quEodcI/G122sRhSGU2BsSRUZ2Gu3w==" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.27.0/plugins/autoloader/prism-autoloader.min.js" integrity="sha512-GP4x8UWxWyh4BMbyJGOGneiTbkrWEF5izsVJByzVLodP8CuJH/n936+yQDMJJrOPUHLgyPbLiGw2rXmdvGdXHA==" crossorigin="anonymous"></script>



<script defer src="/assets/js/fuji.min.645f1123be695831f419ab54c1bcba327325895c740014006e57070d4f3e5d6b553e929c4b46f40ea707249e9c7f7c2a446d32a39ce7319f80a34525586a8e0f.js" integrity="sha512-ZF8RI75pWDH0GatUwby6MnMliVx0ABQAblcHDU8&#43;XWtVPpKcS0b0DqcHJJ6cf3wqRG0yo5znMZ&#43;Ao0UlWGqODw=="></script>



</body>

</html>
